"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2453],{3905:function(e,n,t){t.d(n,{Zo:function(){return p},kt:function(){return f}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function s(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),c=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):s(s({},n),e)),t},p=function(e){var n=c(e.components);return r.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),d=c(t),f=o,m=d["".concat(l,".").concat(f)]||d[f]||u[f]||a;return t?r.createElement(m,s(s({ref:n},p),{},{components:t})):r.createElement(m,s({ref:n},p))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,s=new Array(a);s[0]=d;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,s[1]=i;for(var c=2;c<a;c++)s[c]=t[c];return r.createElement.apply(null,s)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},8281:function(e,n,t){t.r(n),t.d(n,{assets:function(){return p},contentTitle:function(){return l},default:function(){return f},frontMatter:function(){return i},metadata:function(){return c},toc:function(){return u}});var r=t(3117),o=t(102),a=(t(7294),t(3905)),s=["components"],i={sidebar_position:3,title:"Install eBPF Sensor on Docker | Levo.ai Documentation"},l="Sensor via Docker",c={unversionedId:"install-traffic-capture-sensors/ebpf-sensor/sensor-docker",id:"install-traffic-capture-sensors/ebpf-sensor/sensor-docker",title:"Install eBPF Sensor on Docker | Levo.ai Documentation",description:"Install on Linux host via Docker",source:"@site/docs/install-traffic-capture-sensors/ebpf-sensor/sensor-docker.md",sourceDirName:"install-traffic-capture-sensors/ebpf-sensor",slug:"/install-traffic-capture-sensors/ebpf-sensor/sensor-docker",permalink:"/install-traffic-capture-sensors/ebpf-sensor/sensor-docker",draft:!1,editUrl:"https://github.com/levoai/docs/edit/main/docs/install-traffic-capture-sensors/ebpf-sensor/sensor-docker.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3,title:"Install eBPF Sensor on Docker | Levo.ai Documentation"},sidebar:"tutorialSidebar",previous:{title:"Sensor on AWS ECS using Terraform",permalink:"/install-traffic-capture-sensors/ebpf-sensor/sensor-aws-ecs-terraform"},next:{title:"Sensor via APT Package",permalink:"/install-traffic-capture-sensors/ebpf-sensor/sensor-apt-package"}},p={},u=[{value:"Install on Linux host via Docker",id:"install-on-linux-host-via-docker",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"1. Install Sensor",id:"1-install-sensor",level:3},{value:"NOTE:",id:"note",level:4},{value:"2. Verify connectivity with Satellite",id:"2-verify-connectivity-with-satellite",level:3},{value:"<br></br>",id:"brbr",level:2},{value:"Sensor Lifecycle Management",id:"sensor-lifecycle-management",level:2},{value:"Uninstall Sensor",id:"uninstall-sensor",level:3},{value:"Get Sensor Logs",id:"get-sensor-logs",level:3},{value:"Upgrade Sensor",id:"upgrade-sensor",level:3},{value:"Manage Sensor Configuration",id:"manage-sensor-configuration",level:3}],d={toc:u};function f(e){var n=e.components,t=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,r.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"sensor-via-docker"},"Sensor via Docker"),(0,a.kt)("h2",{id:"install-on-linux-host-via-docker"},"Install on Linux host via Docker"),(0,a.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Docker Engine version ",(0,a.kt)("inlineCode",{parentName:"li"},"18.03.0")," and above"),(0,a.kt)("li",{parentName:"ul"},"Admin (or ",(0,a.kt)("inlineCode",{parentName:"li"},"sudo"),") privileges on the Docker host")),(0,a.kt)("h3",{id:"1-install-sensor"},"1. Install Sensor"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"If you are installing the Satellite and Sensor on the ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"same"))," Linux host, please do ",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("em",{parentName:"strong"},"NOT"))," use ",(0,a.kt)("inlineCode",{parentName:"p"},"localhost")," as the satellite-address below. Use ",(0,a.kt)("inlineCode",{parentName:"p"},"host.docker.internal"),", or the Linux host's ",(0,a.kt)("inlineCode",{parentName:"p"},"IP address")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"domain name")," instead. This is required as the Sensor runs inside a Docker container, and ",(0,a.kt)("inlineCode",{parentName:"p"},"localhost")," resolves to the Sensor container's IP address, instead of the Linux host.")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"# Replace '<satellite-address>' with the values you noted down from the Satellite install\n#\n# Specify below the 'Application Name' chosen earlier. Do not quote the 'Application Name'\n#\nsudo docker run --restart unless-stopped \\\n  -v /sys/kernel/debug:/sys/kernel/debug -v /proc:/host/proc \\\n  --add-host host.docker.internal:host-gateway \\\n  --privileged --detach levoai/ebpf_sensor:0.46.3 \\\n  --host-proc-path /host/proc/ \\\n  --satellite-url <satellite-address> \\\n  --organization-id <Org ID> \\\n  --env <'application-environment'> \\\n  --default-service-name <'Application Name' chosen earlier>\n")),(0,a.kt)("h4",{id:"note"},"NOTE:"),(0,a.kt)("p",null,"The default address for the collector in Docker-based Sensor installations is ",(0,a.kt)("inlineCode",{parentName:"p"},"https://collector.levo.ai"),".\nThis address assumes that Levo is hosting the Satellite for you, and you must also specify an organization ID when starting the sensor (with the ",(0,a.kt)("inlineCode",{parentName:"p"},"--organization-id")," flag).\nIf you wish, you may also host the Satellite yourself and specify the address of the collector in the self-hosted Satellite to direct the Sensor's traffic to it."),(0,a.kt)("h3",{id:"2-verify-connectivity-with-satellite"},"2. Verify connectivity with Satellite"),(0,a.kt)("p",null,"Execute the following command to check for connectivity health:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# Please specify the actual container name for levoai-sensor below\ndocker logs <levoai-sensor container name> | grep "Initial connection with Collector"\n')),(0,a.kt)("p",null,"If connectivity is healthy, you should see output similar to below."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"2022/06/13 21:15:40 729071  INFO [ebpf_sensor.cpp->main:120]    Initial connection with Collector was successful.\n")),(0,a.kt)("p",null,"Please proceed to the next step, if there are no errors."),(0,a.kt)("h2",{id:"brbr"},(0,a.kt)("br",null)),(0,a.kt)("h2",{id:"sensor-lifecycle-management"},"Sensor Lifecycle Management"),(0,a.kt)("h3",{id:"uninstall-sensor"},"Uninstall Sensor"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# Get the container id of the Sensor\ndocker ps | grep "levoai/ebpf_sensor"\n\n# Remove the Sensor\ndocker rm -f <container id from docker ps step above>\n')),(0,a.kt)("h3",{id:"get-sensor-logs"},"Get Sensor Logs"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'# Get the container id of the Sensor\ndocker ps | grep "levoai/ebpf_sensor"\n\nsudo docker logs <container id from docker ps step above>\n')),(0,a.kt)("h3",{id:"upgrade-sensor"},"Upgrade Sensor"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Uninstall Sensor"),(0,a.kt)("li",{parentName:"ul"},"Pull new Sensor image")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"docker pull levoai/ebpf_sensor:latest\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Reinstall Sensor")),(0,a.kt)("h3",{id:"manage-sensor-configuration"},"Manage Sensor Configuration"),(0,a.kt)("p",null,"Please refer to ",(0,a.kt)("a",{parentName:"p",href:"/install-traffic-capture-sensors/common-tasks/sensor-configuration"},"Sensor Configuration"),", and ",(0,a.kt)("a",{parentName:"p",href:"/install-traffic-capture-sensors/common-tasks/sensor-configuration#running-via-docker"},"Applying Configuration Changes"),"."))}f.isMDXComponent=!0}}]);