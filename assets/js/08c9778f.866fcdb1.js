"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9433],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return d}});var r=n(7294);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}var l=r.createContext({}),u=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,s=e.mdxType,o=e.originalType,l=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=u(n),d=s,f=m["".concat(l,".").concat(d)]||m[d]||p[d]||o;return n?r.createElement(f,a(a({ref:t},c),{},{components:n})):r.createElement(f,a({ref:t},c))}));function d(e,t){var n=arguments,s=t&&t.mdxType;if("string"==typeof e||s){var o=n.length,a=new Array(o);a[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:s,a[1]=i;for(var u=2;u<o;u++)a[u]=n[u];return r.createElement.apply(null,a)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2430:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return d},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return p}});var r=n(3117),s=n(102),o=(n(7294),n(3905)),a=["components"],i={sidebar_position:2,title:"Install PCAP Sensor on Kubernetes | Levo.ai Documentation"},l="Sensor on Kubernetes",u={unversionedId:"install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes",id:"install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes",title:"Install PCAP Sensor on Kubernetes | Levo.ai Documentation",description:"Install on Kubernetes as daemonset",source:"@site/docs/install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes.md",sourceDirName:"install-traffic-capture-sensors/pcap-sensor",slug:"/install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes",permalink:"/install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes",draft:!1,editUrl:"https://github.com/levoai/docs/edit/main/docs/install-traffic-capture-sensors/pcap-sensor/sensor-kubernetes.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2,title:"Install PCAP Sensor on Kubernetes | Levo.ai Documentation"},sidebar:"tutorialSidebar",previous:{title:"Install PCAP Sensor on Docker | Levo.ai Documentation",permalink:"/install-traffic-capture-sensors/pcap-sensor/sensor-docker"},next:{title:"PCAP Sensor via YUM Package",permalink:"/install-traffic-capture-sensors/pcap-sensor/pcap-sensor-yum-package"}},c={},p=[{value:"Install on Kubernetes as daemonset",id:"install-on-kubernetes-as-daemonset",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"1. Add levoai helm repo",id:"1-add-levoai-helm-repo",level:3},{value:"2. Create levoai namespace and install pcap-sensor",id:"2-create-levoai-namespace-and-install-pcap-sensor",level:3},{value:"3. Configuring sensor as per memory and CPU resource limits",id:"3-configuring-sensor-as-per-memory-and-cpu-resource-limits",level:3},{value:"Using a Private Docker Registry for Kubernetes Installations (Optional)",id:"using-a-private-docker-registry-for-kubernetes-installations-optional",level:3},{value:"Optimizing Resource Usage for Levo PCAP Sensor",id:"optimizing-resource-usage-for-levo-pcap-sensor",level:3},{value:"1. Configure CPU and Memory Requests/Limits",id:"1-configure-cpu-and-memory-requestslimits",level:4},{value:"2. Set Resource Values via Helm",id:"2-set-resource-values-via-helm",level:4},{value:"3. Verify Resource Settings",id:"3-verify-resource-settings",level:4},{value:"4. Tips for Tuning",id:"4-tips-for-tuning",level:4}],m={toc:p};function d(e){var t=e.components,i=(0,s.Z)(e,a);return(0,o.kt)("wrapper",(0,r.Z)({},m,i,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"sensor-on-kubernetes"},"Sensor on Kubernetes"),(0,o.kt)("h2",{id:"install-on-kubernetes-as-daemonset"},"Install on Kubernetes as daemonset"),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Kubernetes version >= v1.18.0"),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://helm.sh/docs/intro/install/"},"Helm v3"),"  installed and working."),(0,o.kt)("li",{parentName:"ul"},"The Kubernetes cluster API endpoint should be reachable from the machine you are running Helm."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"kubectl"),"  access to the cluster, with  ",(0,o.kt)("inlineCode",{parentName:"li"},"cluster-admin"),"  permissions.")),(0,o.kt)("h3",{id:"1-add-levoai-helm-repo"},"1. Add levoai helm repo"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"helm repo add levoai https://charts.levo.ai && helm repo update levoai\n")),(0,o.kt)("h3",{id:"2-create-levoai-namespace-and-install-pcap-sensor"},"2. Create levoai namespace and install pcap-sensor"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"# Replace 'hostname|IP' & 'port' with the values you noted down from the Satellite install\n# If Sensor is installed on same cluster as Satellite, use 'http://levoai-haproxy:80' \n# Specify below the 'Application Name' chosen earlier.\n#\nhelm upgrade levoai-pcap-sensor levoai/levoai-pcap-sensor \\\n  --install \\\n  --namespace levoai \\\n  --create-namespace \\\n  --set sensor.config.levoaiOrgId=\"your Levo Org ID\" \\\n  --set sensor.config.satelliteUrl=\"http(s)://hostname|IP:port\" \\\n  --set sensor.config.levoEnv=\"your application environment (staging, production etc.)\"\n")),(0,o.kt)("p",null,"Set additional configs"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'sensor.config.traceExportInterval="trace export interval in seconds (default 10)"\nsensor.config.rateLimit="rate limit number in traces/min (default 1000)"\nsensor.config.fitler="pcap filter string, eg. port 8080 and (not port 8081)"\nsensor.config.hostAllow="host allow regex"\nsensor.config.pathAllow="path allow regex"\nsensor.config.hostExclusions="host exclusion regex"\nsensor.config.pathExclusions="path exclusion regex"\n')),(0,o.kt)("h3",{id:"3-configuring-sensor-as-per-memory-and-cpu-resource-limits"},"3. Configuring sensor as per memory and CPU resource limits"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"For normal/average case use the default config"),(0,o.kt)("li",{parentName:"ul"},"For strict resources, use the ",(0,o.kt)("a",{target:"_blank",href:n(2781).Z},"Low resource helm values file"))),(0,o.kt)("h3",{id:"using-a-private-docker-registry-for-kubernetes-installations-optional"},"Using a Private Docker Registry for Kubernetes Installations (Optional)"),(0,o.kt)("p",null,"If you want to use a private docker registry for the sensor installation, refer to ",(0,o.kt)("a",{parentName:"p",href:"/guides/general/private-registry"},"Using a Private Docker Registry for Kubernetes Installations"),"."),(0,o.kt)("h3",{id:"optimizing-resource-usage-for-levo-pcap-sensor"},"Optimizing Resource Usage for Levo PCAP Sensor"),(0,o.kt)("p",null,"Resource requests and limits help ensure the PCAP Sensor runs efficiently and reliably in your Kubernetes cluster. You can tune these settings to match your environment\u2019s needs and available resources."),(0,o.kt)("h4",{id:"1-configure-cpu-and-memory-requestslimits"},"1. Configure CPU and Memory Requests/Limits"),(0,o.kt)("p",null,"The Sensor\u2019s resource settings are defined in the Helm chart under ",(0,o.kt)("inlineCode",{parentName:"p"},"sensor.containerResources"),". You can override these values during installation or upgrade:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Requests"),": Minimum resources guaranteed for the container."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Limits"),": Maximum resources the container can use.")),(0,o.kt)("p",null,"Example values.yaml section:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"sensor:\n  containerResources:\n    requests:\n      cpu: 0.5\n      memory: 1Gi\n    limits:\n      cpu: 1\n      memory: 2Gi\n")),(0,o.kt)("h4",{id:"2-set-resource-values-via-helm"},"2. Set Resource Values via Helm"),(0,o.kt)("p",null,"To customize resource allocation, use the following flags with your Helm command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"helm upgrade --install -n levoai levoai-pcap-sensor levoai/levoai-pcap-sensor \\\n  --set sensor.containerResources.requests.cpu=0.25 \\\n  --set sensor.containerResources.limits.cpu=0.5 \\\n  --set sensor.containerResources.requests.memory=512Mi \\\n  --set sensor.containerResources.limits.memory=1Gi\n")),(0,o.kt)("p",null,"You can adjust the values (",(0,o.kt)("inlineCode",{parentName:"p"},"cpu"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"memory"),") to fit your cluster\u2019s capacity and workload."),(0,o.kt)("h4",{id:"3-verify-resource-settings"},"3. Verify Resource Settings"),(0,o.kt)("p",null,"After deployment, check the resource settings applied to the Sensor pod:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-shell"},"kubectl -n levoai get pod <levoai-pcap-sensor-pod-name> -o jsonpath='{.spec.containers[*].resources}'\n")),(0,o.kt)("h4",{id:"4-tips-for-tuning"},"4. Tips for Tuning"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Monitor Usage"),": Use ",(0,o.kt)("inlineCode",{parentName:"li"},"kubectl top pod")," or your cluster\u2019s monitoring tools to observe actual resource consumption."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Adjust Gradually"),": Start with conservative values and increase if you notice throttling or OOM (Out Of Memory) errors."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"Cluster Constraints"),": Ensure your node types and quotas can support the requested resources.")),(0,o.kt)("p",null,"For further assistance with resource optimization, contact ",(0,o.kt)("a",{parentName:"p",href:"mailto:support@levo.ai"},"Support"),"."))}d.isMDXComponent=!0},2781:function(e,t,n){t.Z=n.p+"assets/files/low_resource_values-dd7b662f3e0098d28f2a30a5414c64eb.yaml"}}]);